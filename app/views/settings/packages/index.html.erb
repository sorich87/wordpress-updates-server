<%= render :partial => 'settings/layout' %>


<h2>Price Packages</h2>

<p>Add the price packages you offer to your customers here.</p>

<div class="row">
<% @packages.each do |package| %>
  <div id="<%=package.id%>" class="span5 well">
    <h3><%= package.name %></h3>
    <p><%= package.description %></p>
    <p>Themes:
      <%- for theme in package.themes do -%>
        <%= theme.name %> |
      <%- end -%>
    </p>
    <ul>
      <li><%= package_theme_price_description(package) %></li>
      <li><%= package_validity_description(package) %></li>
      <li><%= package_renewal_description(package) %></li>
    </ul>
    <div style="margin-top:20px;">
      <%= link_to 'Edit', edit_settings_package_path(package) %> | 
      <%= link_to 'Delete', settings_package_path(package), method: :delete, confirm: "Are you sure?", title: 'Delete package' %>
    </div>
  </div>
<% end %>
</div>

<p><a href="#" id="add_new_package"><i class="icon-plus"></i> Add a package</a></p>
<div id="new_package_parent" class="hidden">
  <%= simple_form_for [:settings, @new_package], url: settings_packages_path, html: {class: 'form-horizontal'}, defaults: {required: false} do |f| %>
    <%= render :partial => 'form', locals: {f: f} %>
  <% end %>
</div>


<% content_for(:javascript) do %>
  <script type="text/javascript">
    $('a#add_new_package').one('click', function() {
      var $parent = $('div#new_package_parent');
      $parent.hide();
      $parent.removeClass('hidden');
      $parent.fadeIn('slow');
    });
  </script>
<% end %>
